<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: SagaFailure Pages: 1 -->
<svg width="643pt" height="474pt"
 viewBox="0.00 0.00 642.61 474.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 470)">
<title>SagaFailure</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-470 638.61,-470 638.61,4 -4,4"/>
<text text-anchor="middle" x="317.3" y="-450.8" font-family="Times,serif" font-size="14.00">Saga Failure at the Packaging Step</text>
<!-- OrderFulfillment -->
<g id="node1" class="node">
<title>OrderFulfillment</title>
<ellipse fill="lightblue" stroke="black" cx="134.5" cy="-425" rx="72.78" ry="18"/>
<text text-anchor="middle" x="134.5" y="-421.9" font-family="Times,serif" font-size="12.00">Order fulfillment</text>
</g>
<!-- CheckStock -->
<g id="node2" class="node">
<title>CheckStock</title>
<polygon fill="lightblue" stroke="black" points="269,-370 0,-370 0,-334 269,-334 269,-370"/>
<text text-anchor="middle" x="134.5" y="-348.9" font-family="Times,serif" font-size="12.00">Check item in stock and reserve for order</text>
</g>
<!-- OrderFulfillment&#45;&gt;CheckStock -->
<g id="edge1" class="edge">
<title>OrderFulfillment&#45;&gt;CheckStock</title>
<path fill="none" stroke="black" d="M134.5,-406.81C134.5,-398.79 134.5,-389.05 134.5,-380.07"/>
<polygon fill="black" stroke="black" points="138,-380.03 134.5,-370.03 131,-380.03 138,-380.03"/>
</g>
<!-- TakeMoney -->
<g id="node3" class="node">
<title>TakeMoney</title>
<polygon fill="lightblue" stroke="black" points="402.5,-297 220.5,-297 220.5,-261 402.5,-261 402.5,-297"/>
<text text-anchor="middle" x="311.5" y="-275.9" font-family="Times,serif" font-size="12.00">Take money from customer</text>
</g>
<!-- CheckStock&#45;&gt;TakeMoney -->
<g id="edge2" class="edge">
<title>CheckStock&#45;&gt;TakeMoney</title>
<path fill="none" stroke="black" d="M176.9,-333.99C201.67,-324.06 233.14,-311.43 259.41,-300.89"/>
<polygon fill="black" stroke="black" points="260.86,-304.08 268.84,-297.11 258.25,-297.59 260.86,-304.08"/>
</g>
<!-- Warehouse -->
<g id="node7" class="node">
<title>Warehouse</title>
<polygon fill="lightgrey" stroke="black" points="179.5,-18 150,-36 91,-36 61.5,-18 91,0 150,0 179.5,-18"/>
<text text-anchor="middle" x="120.5" y="-14.9" font-family="Times,serif" font-size="12.00">Warehouse</text>
</g>
<!-- CheckStock&#45;&gt;Warehouse -->
<g id="edge6" class="edge">
<title>CheckStock&#45;&gt;Warehouse</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M129.96,-333.92C126.57,-319.62 122.5,-298.63 122.5,-280 122.5,-280 122.5,-280 122.5,-104 122.5,-84.75 121.98,-63.05 121.47,-46.39"/>
<polygon fill="darkgreen" stroke="darkgreen" points="124.97,-46.14 121.14,-36.25 117.97,-46.36 124.97,-46.14"/>
<text text-anchor="middle" x="163.5" y="-188.3" font-family="Times,serif" font-size="14.00">Handled by</text>
</g>
<!-- AwardPoints -->
<g id="node4" class="node">
<title>AwardPoints</title>
<polygon fill="lightblue" stroke="black" points="398,-210 225,-210 225,-174 398,-174 398,-210"/>
<text text-anchor="middle" x="311.5" y="-188.9" font-family="Times,serif" font-size="12.00">Award points to customer</text>
</g>
<!-- TakeMoney&#45;&gt;AwardPoints -->
<g id="edge3" class="edge">
<title>TakeMoney&#45;&gt;AwardPoints</title>
<path fill="none" stroke="black" d="M311.5,-260.8C311.5,-249.16 311.5,-233.55 311.5,-220.24"/>
<polygon fill="black" stroke="black" points="315,-220.18 311.5,-210.18 308,-220.18 315,-220.18"/>
</g>
<!-- PaymentGateway -->
<g id="node8" class="node">
<title>PaymentGateway</title>
<polygon fill="lightgrey" stroke="black" points="593.2,-192 548.85,-210 460.15,-210 415.8,-192 460.15,-174 548.85,-174 593.2,-192"/>
<text text-anchor="middle" x="504.5" y="-188.9" font-family="Times,serif" font-size="12.00">Payment Gateway</text>
</g>
<!-- TakeMoney&#45;&gt;PaymentGateway -->
<g id="edge7" class="edge">
<title>TakeMoney&#45;&gt;PaymentGateway</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M350.56,-260.8C381.13,-247.33 423.81,-228.54 456.47,-214.15"/>
<polygon fill="darkgreen" stroke="darkgreen" points="458.09,-217.26 465.83,-210.03 455.27,-210.86 458.09,-217.26"/>
<text text-anchor="middle" x="461.5" y="-231.8" font-family="Times,serif" font-size="14.00">Handled by</text>
</g>
<!-- PackageOrder -->
<g id="node5" class="node">
<title>PackageOrder</title>
<polygon fill="lightcoral" stroke="black" points="393,-123 230,-123 230,-87 393,-87 393,-123"/>
<text text-anchor="middle" x="311.5" y="-101.9" font-family="Times,serif" font-size="12.00">Package and send order</text>
</g>
<!-- AwardPoints&#45;&gt;PackageOrder -->
<g id="edge4" class="edge">
<title>AwardPoints&#45;&gt;PackageOrder</title>
<path fill="none" stroke="black" d="M311.5,-173.8C311.5,-162.16 311.5,-146.55 311.5,-133.24"/>
<polygon fill="black" stroke="black" points="315,-133.18 311.5,-123.18 308,-133.18 315,-133.18"/>
</g>
<!-- Loyalty -->
<g id="node9" class="node">
<title>Loyalty</title>
<polygon fill="lightgrey" stroke="black" points="499.64,-105 477.57,-123 433.43,-123 411.36,-105 433.43,-87 477.57,-87 499.64,-105"/>
<text text-anchor="middle" x="455.5" y="-101.9" font-family="Times,serif" font-size="12.00">Loyalty</text>
</g>
<!-- AwardPoints&#45;&gt;Loyalty -->
<g id="edge8" class="edge">
<title>AwardPoints&#45;&gt;Loyalty</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M340.64,-173.8C364.06,-159.97 397,-140.53 421.6,-126.01"/>
<polygon fill="darkgreen" stroke="darkgreen" points="423.42,-129 430.25,-120.9 419.86,-122.97 423.42,-129"/>
<text text-anchor="middle" x="433.5" y="-144.8" font-family="Times,serif" font-size="14.00">Handled by</text>
</g>
<!-- FulfillmentCompleted -->
<g id="node6" class="node">
<title>FulfillmentCompleted</title>
<ellipse fill="lightblue" stroke="black" cx="543.5" cy="-18" rx="91.21" ry="18"/>
<text text-anchor="middle" x="543.5" y="-14.9" font-family="Times,serif" font-size="12.00">Fulfillment completed</text>
</g>
<!-- PackageOrder&#45;&gt;FulfillmentCompleted -->
<g id="edge5" class="edge">
<title>PackageOrder&#45;&gt;FulfillmentCompleted</title>
<path fill="none" stroke="black" d="M358.17,-86.9C397.16,-72.61 452.67,-52.28 492.76,-37.59"/>
<polygon fill="black" stroke="black" points="494.16,-40.81 502.34,-34.08 491.75,-34.23 494.16,-40.81"/>
</g>
<!-- PackageOrder&#45;&gt;Warehouse -->
<g id="edge9" class="edge">
<title>PackageOrder&#45;&gt;Warehouse</title>
<path fill="none" stroke="darkgreen" stroke-dasharray="5,2" d="M269.48,-86.9C256.02,-81.31 241.08,-75 227.5,-69 205.64,-59.34 181.51,-48.12 161.7,-38.75"/>
<polygon fill="darkgreen" stroke="darkgreen" points="163.18,-35.58 152.65,-34.45 160.18,-41.9 163.18,-35.58"/>
<text text-anchor="middle" x="268.5" y="-57.8" font-family="Times,serif" font-size="14.00">Handled by</text>
</g>
<!-- Failure -->
<g id="node10" class="node">
<title>Failure</title>
<polygon fill="lightgrey" stroke="transparent" points="434,-36 197,-36 197,0 434,0 434,-36"/>
<text text-anchor="middle" x="315.5" y="-14.9" font-family="Times,serif" font-size="12.00" fill="red">Error! Item not found in warehouse!</text>
</g>
<!-- PackageOrder&#45;&gt;Failure -->
<g id="edge10" class="edge">
<title>PackageOrder&#45;&gt;Failure</title>
<path fill="none" stroke="red" stroke-dasharray="1,5" d="M312.31,-86.8C312.86,-75.16 313.59,-59.55 314.22,-46.24"/>
<polygon fill="red" stroke="red" points="317.72,-46.33 314.69,-36.18 310.73,-46 317.72,-46.33"/>
</g>
</g>
</svg>
